import{__assign,__extends}from"tslib";import"../../../CommonImports";import"../../../Core/core.css";import*as React from"react";import{Tooltip}from"../../../TooltipEx";import{css}from"../../../Util";var Time=function(e){function t(t){t=e.call(this,t)||this;return t.timerId=0,t.state={output:""},t}return __extends(t,e),t.getDerivedStateFromProps=function(t){return{output:t.getTimeString()}},t.prototype.render=function(){var t={"aria-hidden":this.props.ariaHidden,className:css(this.props.className,"bolt-time-item white-space-nowrap")},e="span",i=(this.props.dateTime&&(e="time",t.dateTime=this.props.dateTime.toISOString()),this.props.ariaLabel?this.state.output+" "+(this.props.ariaLabel||""):void 0),i=React.createElement("span",{className:"text-ellipsis","aria-label":i,tabIndex:this.props.tabIndex},React.createElement(e,__assign({},t),this.state.output));return i=this.props.tooltipProps?React.createElement(Tooltip,__assign({},this.props.tooltipProps),i):i},t.prototype.componentDidUpdate=function(t){this.cancelNextRefresh(),this.setNextRefresh()},t.prototype.componentDidMount=function(){this.setNextRefresh()},t.prototype.componentWillUnmount=function(){this.cancelNextRefresh()},t.prototype.cancelNextRefresh=function(){this.timerId&&(window.clearTimeout(this.timerId),this.timerId=0)},t.prototype.setNextRefresh=function(){var t=this,e=this.props.getNextInterval();-1!==e&&(this.timerId=window.setTimeout(function(){t.setState({output:t.props.getTimeString()})},e))},t}(React.Component);export{Time};