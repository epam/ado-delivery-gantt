import{__assign,__extends,__spreadArrays}from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./Table.css";import*as React from"react";import{ObservableLike}from"../../Core/Observable";import*as Utils_Accessibility from"../../Core/Util/Accessibility";import{format}from"../../Core/Util/String";import{FocusOrMouseWithin}from"../../FocusOrMouseWithin";import{FocusWithin}from"../../FocusWithin";import{FocusZone,FocusZoneContext,FocusZoneDirection,FocusZoneKeyStroke}from"../../FocusZone";import{Icon}from"../../Icon";import{Intersection}from"../../Intersection";import{getDefaultLinkProps}from"../../Link";import{List,renderListCell}from"../../List";import{Observer}from"../../Observer";import*as Resources from"../../Resources.Widgets";import{Orientation,Position,Sizer}from"../../Sizer";import{Tooltip}from"../../TooltipEx";import{css,getSafeId,KeyCode}from"../../Util";import{EventDispatch}from"../../Utilities/Dispatch";import{getTabIndex}from"../../Utilities/Focus";import{ScreenSizeConditional}from"../../Utilities/ScreenSize";import{ColumnJustification,IMeasurementStyle,SortOrder,TableColumnLayout,TableColumnStyle}from"./Table.Props";import{TableBreakpoint}from"./TableBreakpoint";var ColumnFillId="_fill",ColumnFill={columnLayout:TableColumnLayout.none,id:ColumnFillId,renderCell:function(e,t){return React.createElement("td",{key:"col-fill","aria-colindex":t+1,"aria-hidden":!0,className:css("bolt-table-cell bolt-list-cell","col-"+t),"data-column-index":t,role:"presentation"})},renderHeaderCell:function(e,t){return React.createElement("th",{key:"col-fill","aria-hidden":!0,className:css(t.headerClassName,"bolt-table-header-cell bolt-table-header-cell-empty","col-header-"+e),"data-column-index":e,role:"presentation"})},width:-100},Table=function(s){function e(e){var c=s.call(this,e)||this;c.currentElement=React.createRef(),c.list=React.createRef(),c.onBreakpoint=function(){var e=c.props.tableBreakpoints?getVisibleColumnsAndIndices(c.props.columns).map(function(e){return e.originalIndex}).join(","):"";!c.state.renderInvisible&&c.state.visibleColumnsKey===e||c.setState({renderInvisible:!1,visibleColumnsKey:e})},c.onColumnsChanged=function(){return c.forceUpdate(),!1},c.renderHeader=function(){for(var e=c.props,t=e.columns,n=e.showHeader,o=e.renderHeader,e=e.spacerWidth,l=[],a=0,r=0;r<t.length;r++)(i=ObservableLike.getValue(t[r].width))<0&&(a+=i);for(r=0;r<t.length;r++){var i=ObservableLike.getValue(t[r].width);l[r]=0<=i?i:-i/a*100}var s=null;return!1!==n&&(s=o?o(t):React.createElement(TableHeader,{tableColumns:t})),"function"==typeof n&&(s=React.createElement(ScreenSizeConditional,{condition:function(e){return n(e)}},s)),React.createElement(React.Fragment,null,React.createElement("colgroup",null,React.createElement("col",{"aria-hidden":"true",key:"col-group-left-spacer",style:{width:0===e?e+"%":e+"px"}}),getVisibleColumnsAndIndices(t).map(function(e){var t=e.column,n=e.originalIndex,e=t.widthStyle,o=void 0===e?IMeasurementStyle.Pixel:e;return React.createElement(Observer,{key:"col-group-"+n,width:{filter:c.onColumnsChanged,observableValue:t.width}},function(){return React.createElement("col",{style:{width:Math.abs(l[n])+(l[n]<0?"%":o===IMeasurementStyle.Pixel?"px":"rem")}})})}),React.createElement("col",{"aria-hidden":"true",key:"col-group-right-spacer",style:{width:0===e?e+"%":e+"px"}})),s)},c.renderLoadingRow=function(e,t){var n=c.props,o=n.columns,n=n.renderLoadingRow,l={ariaBusy:!0,ariaRowOffset:t.ariaRowOffset,data:t.data,eventDispatch:c.state.eventDispatch,excludeFocusZone:!0,excludeTabStop:null!=(l=c.props.excludeTabStop)?l:t.excludeTabStop,itemProvider:c.props.itemProvider,listProps:t.listProps,onFocusItem:t.onFocusItem,renderSpacer:c.props.renderSpacer,selection:c.props.selection,singleClickActivation:c.props.onActivate&&c.props.singleClickActivation};return n?n(e,l):React.createElement(TableLoadingRow,{columns:o,details:l,rowIndex:e})},c.renderRow=function(e,t,n){var o={selectableText:n.selectableText,ariaRowOffset:n.ariaRowOffset,eventDispatch:c.state.eventDispatch,data:n.data,excludeTabStop:null!=(o=c.props.excludeTabStop)?o:n.excludeTabStop,itemProvider:c.props.itemProvider,listProps:n.listProps,onFocusItem:n.onFocusItem,renderSpacer:c.props.renderSpacer,selection:c.props.selection,singleClickActivation:c.props.onActivate&&c.props.singleClickActivation},n=t.renderRow||c.props.renderRow;return n?n(e,t,o):React.createElement(TableRow,{details:o,index:e,linkProps:t.linkProps},renderColumns(e,c.props.columns,t,o))},c.state={columnBehaviors:[],eventDispatch:e.eventDispatch||new EventDispatch,renderInvisible:!!e.tableBreakpoints,visibleColumnsKey:"",tableBehaviors:[],tableWidth:""};for(var t=0;t<e.columns.length;t++){var n=e.columns[t];if(n.behaviors)for(var o=0,l=n.behaviors;o<l.length;o++)(a=l[o])&&a.initialize&&a.initialize({tableProps:e,columnIndex:t},{},c.state.eventDispatch)}if(e.behaviors)for(var a,r=0,i=e.behaviors;r<i.length;r++)(a=i[r]).initialize&&a.initialize(e,c,c.state.eventDispatch);return c}return __extends(e,s),e.getDerivedStateFromProps=function(e,t){for(var n=[],o=[],l=0;l<e.columns.length;l++){var a=e.columns[l];if(a.behaviors)for(var r=0,i=a.behaviors;r<i.length;r++){var s=i[r];o.push(s)}}return e.behaviors&&n.splice.apply(n,__spreadArrays([n.length,0],e.behaviors)),{columnBehaviors:o,tableBehaviors:n}},e.prototype.render=function(){for(var e=this.state,t=e.eventDispatch,n=e.renderInvisible,e=e.visibleColumnsKey,o=this.props,l=o.selectableText,a=o.className,r=o.columns,i=o.containerClassName,s=o.enforceSingleSelect,c=o.focuszoneProps,d=o.showLines,u=o.id,m=o.itemProvider,p=o.maxHeight,b=o.onActivate,h=o.onFocus,f=o.onSelect,v=o.pageSize,D=o.role,_=o.rowHeight,W=o.rowHeights,R=o.scrollable,B=o.selection,H=o.singleClickActivation,U=o.selectRowOnClick,M=o.showScroll,g=o.tableBreakpoints,o=o.virtualize,C=[],w=2*(this.props.spacerWidth||0),x=w,y=w,S=w,I=!1,E=!1,L=!1,T=0,k=0,F=0,N=r;F<N.length;F++){var P=N[F],z=P.maxWidth,V=P.minWidth,A=P.widthStyle,A=void 0===A?IMeasurementStyle.Pixel:A,O=ObservableLike.getValue(P.width);C.push(P.width),O<0?(L=!0,y+=V||0,z?(I=!0,x+=z):E=!0,T++):0<O&&(A===IMeasurementStyle.Pixel?(S+=O,y+=O,x+=O):(S+=16*O,y+=16*O,x+=16*O),T++),"_fill"===P.id&&k++}w={selectableText:l,ariaColumnCount:T-k,ariaLabel:this.props.ariaLabel,ariaRowOffset:this.props.showHeader?1:0,className:css(a,"bolt-table",d&&"bolt-table-show-lines"),columnCount:T+2,enforceSingleSelect:s,eventDispatch:t,focuszoneProps:c,id:u,itemProvider:m,maxWidth:I&&!E?x+"px":void 0,maxHeight:p,minWidth:y!==S?y+"px":void 0,onActivate:b,onFocus:h,onSelect:f,pageSize:v,renderHeader:this.renderHeader,renderLoadingRow:this.renderLoadingRow,renderRow:this.renderRow,role:D,rowHeight:_,rowHeights:W,selection:B,selectRowOnClick:U,singleClickActivation:H,showScroll:M,virtualize:o,width:L?"100%":S+"px"},0<=getActionableIndex(r)&&(w.defaultTabbableRow=-1),l=React.createElement("div",{className:css(i,"bolt-table-container flex-grow",n&&"invisible",R&&"v-scroll-auto",g&&"h-scroll-hidden"),ref:this.currentElement},g?React.createElement(TableBreakpoint,{columnWidths:C,onBreakpoint:this.onBreakpoint,breakpoints:g}):void 0,React.createElement(List,__assign({},w,{key:e,ref:this.list})));return l=R?React.createElement(Intersection,null,l):l},e.prototype.componentDidMount=function(){for(var e=0,t=this.state.tableBehaviors;e<t.length;e++)(n=t[e]).componentDidMount&&n.componentDidMount(this.props);for(var n,o=0,l=this.state.columnBehaviors;o<l.length;o++)(n=l[o]).componentDidMount&&n.componentDidMount({tableProps:this.props})},e.prototype.componentDidUpdate=function(){for(var e=0,t=this.state.tableBehaviors;e<t.length;e++)(n=t[e]).componentDidUpdate&&n.componentDidUpdate(this.props);for(var n,o=0,l=this.state.columnBehaviors;o<l.length;o++)(n=l[o]).componentDidUpdate&&n.componentDidUpdate({tableProps:this.props})},e.prototype.componentWillUnmount=function(){for(var e=0,t=this.state.tableBehaviors;e<t.length;e++)(n=t[e]).componentWillUnmount&&n.componentWillUnmount();for(var n,o=0,l=this.state.columnBehaviors;o<l.length;o++)(n=l[o]).componentDidUpdate&&n.componentDidUpdate({tableProps:this.props})},e.prototype.addOverlay=function(e,t,n,o,l){if(void 0===o&&(o=0),this.list.current)return this.list.current.addOverlay(e,t,n,o,l)},e.prototype.removeOverlay=function(e){if(this.list.current)return this.list.current.removeOverlay(e)},e.prototype.focusRow=function(e,t){return void 0===t&&(t=1),this.list.current?this.list.current.focusRow(e,t):Promise.resolve()},e.prototype.getFocusIndex=function(){return this.list.current?this.list.current.getFocusIndex():-1},e.prototype.getStats=function(){return this.list.current?this.list.current.getStats():{firstMaterialized:-1,firstRendered:-1,lastMaterialized:-1,lastRendered:-1}},e.prototype.scrollIntoView=function(e,t){if(this.list.current)return this.list.current.scrollIntoView(e,t)},e.defaultProps={role:"grid",selectRowOnClick:!0,showHeader:!0,showLines:!0,singleClickActivation:!0,spacerWidth:8},e}(React.Component);function renderColumns(n,e,o,l){return getVisibleColumnsAndIndices(e).map(function(e,t){e=e.column;return e.renderCell(n,t,e,o,n+(l.ariaRowOffset||1))})}function getVisibleColumnsAndIndices(e){return e.map(function(e,t){return{column:e,originalIndex:t}}).filter(function(e){e=e.column;return ObservableLike.getValue(e.width)})}function getActionableIndex(e){return e.findIndex(function(e){return 0!==ObservableLike.getValue(e.width)&&(e.behaviors&&0<e.behaviors.length||!!e.sortProps)})}var TableHeader=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.render=function(){var t=this,l=getActionableIndex(this.props.tableColumns);return React.createElement(FocusZoneContext.Consumer,null,function(o){return React.createElement(FocusZone,{direction:FocusZoneDirection.Horizontal},React.createElement("thead",null,React.createElement(FocusWithin,null,function(e){return React.createElement("tr",{"aria-rowindex":1,className:css("bolt-table-header-row",e.hasFocus&&"focused"),"data-row-index":-1,onBlur:e.onBlur,onFocus:e.onFocus,role:"row"},React.createElement("th",{"aria-hidden":"true",key:"left-spacer",role:"presentation",className:"bolt-table-header-border"}),getVisibleColumnsAndIndices(t.props.tableColumns).map(function(e,t){var n=e.column,e=e.originalIndex;return n.renderHeaderCell?n.renderHeaderCell(t,n,o.focuszoneId,e===l):n.iconProps||n.name?React.createElement(TableHeaderCell,{key:"col-header-"+t,ariaLabel:n.ariaLabel||n.name,column:n,columnIndex:t,focuszoneId:o.focuszoneId,isFirstActionableHeader:e===l},React.createElement(Tooltip,{overflowOnly:!0,text:n.name},React.createElement("div",{className:"bolt-table-header-cell-text text-ellipsis body-s"},n.iconProps&&Icon(n.iconProps),React.createElement("span",null,n.name)))):React.createElement("th",{"aria-colindex":t+1,"aria-label":n.ariaLabel||Resources.EmptyColumnHeaderLabel,"aria-readonly":void 0!==n.readonly?n.readonly:"true",className:"bolt-table-header-border",key:"col-header-"+t})}),React.createElement("th",{"aria-hidden":"true",key:"right-spacer",role:"presentation",className:"bolt-table-header-border"}))})))})},t}(React.Component),boltTableHeaderCellCount=0,TableHeaderCell=function(t){function e(e){var o=t.call(this,e)||this;return o.element=React.createRef(),o.state={measuredWidth:0,isFocused:!1},o.onSize=function(e,t){var n=o.props.column;n.onSize&&n.onSize(e,o.props.columnIndex,t,n)},o.headerCellId=boltTableHeaderCellCount++,o}return __extends(e,t),e.prototype.render=function(){var i,s=this,e=this.props,c=e.ariaLabel,d=e.column,u=e.columnIndex,m=e.focuszoneId,p=e.isFirstActionableHeader;return d.onSize&&(i=React.createElement(Observer,{width:d.width},function(e){e=e.width;return e<0&&(e=s.state.measuredWidth),React.createElement(Sizer,{ariaLabel:format(Resources.ColumnSizerLabel,d.name),className:"bolt-table-header-sizer",divider:!1,maxSize:d.maxWidth,minSize:d.minWidth,onSize:s.onSize,onSizeEnd:s.props.column.onSizeEnd,orientation:Orientation.row,position:Position.near,size:e,tabIndex:0,getFocusedElement:function(e){return s.element}})})),React.createElement(FocusZoneContext.Consumer,null,function(e){var t,n=d.behaviors&&0<d.behaviors.length||!!d.sortProps,o=d.sortProps,o=void 0===o?{}:o,l=d.sortProps&&void 0!==o.sortOrder?Icon({className:"bolt-table-header-sort-icon body-s",iconName:o.sortOrder===SortOrder.ascending?"SortUp":"SortDown"}):null,a=(d.justification===ColumnJustification.Left?t="justify-start":d.justification===ColumnJustification.Right&&(t="justify-end"),u+1),r=getSafeId("th-col-content-"+s.headerCellId);return React.createElement("th",{role:"columnheader","aria-colindex":a,"aria-label":c,"aria-labelledby":c?void 0:r,"aria-readonly":"true","aria-sort":void 0!==o.sortOrder?o.sortOrder===SortOrder.ascending?"ascending":"descending":void 0,className:css(d.headerClassName,"bolt-table-header-cell","col-header-"+u,n&&"bolt-table-header-cell-actionable"),"data-column-index":u,"data-focuszone":n&&css(p&&m,e.focuszoneId),ref:s.element,onFocus:function(){return s.setState({isFocused:!0})},onBlur:function(){return s.setState({isFocused:!1})},tabIndex:n||i?0:-1},React.createElement("div",{className:css("bolt-table-header-cell-content flex-row",t)},d.justification===ColumnJustification.Right&&l,React.createElement("div",{id:r,className:"scroll-hidden"},s.props.children),d.justification!==ColumnJustification.Right&&l,React.createElement("div",{"aria-hidden":!s.state.isFocused},i)))})},e.prototype.componentDidMount=function(){this.updateMeasuredWidth()},e.prototype.componentDidUpdate=function(){this.updateMeasuredWidth()},e.prototype.updateMeasuredWidth=function(){var e=this.props.column;e.onSize&&this.element.current&&ObservableLike.getValue(e.width)<0&&(e=this.element.current.getBoundingClientRect().width)!==this.state.measuredWidth&&this.setState({measuredWidth:e})},e}(React.Component);function TableRow(o){function l(e){var t=e.target.nodeName;return e.defaultPrevented||"INPUT"===t||"TEXTAREA"===t||e.which===KeyCode.leftArrow&&i.current&&(i.current.focus(),e.preventDefault()),FocusZoneKeyStroke.IgnoreNone}var a,r,i=React.useState(function(){return React.createRef()})[0],s=o.details,c=o.index,d=o.linkProps,u=s.selectableText,m=s.ariaLabel,p=s.ariaBusy,b=s.ariaDescribedBy,h=s.ariaPosInSet,f=s.ariaRowOffset,v=s.ariaSetSize,R=s.excludeFocusZone,g=s.id,C=s.renderSpacer,w=s.role,x=s.selection,y=s.singleClickActivation,e=("menuitemcheckbox"===w?a=x&&x.selected(c):r=x&&x.selected(c),React.createElement(FocusOrMouseWithin,{onFocus:function(e){o.details.onFocusItem(o.index,e);e=null!=(e=o.details.ariaPosInSet)?e:o.index+f;o.details.ariaSetSize?o.linkProps?Utils_Accessibility.announce(format(Resources.ClickableRowAnnouncementWithSize,e,o.details.ariaSetSize),!0):"option"==w?Utils_Accessibility.announce(Resources.ListItem,!0):Utils_Accessibility.announce(format(Resources.RowAnnouncementWithSize,e,o.details.ariaSetSize),!0):o.linkProps?Utils_Accessibility.announce(format(Resources.ClickableRowAnnouncement,e),!0):Utils_Accessibility.announce(format(Resources.RowAnnouncement,e),!0)}},function(n){return React.createElement(FocusZoneContext.Consumer,null,function(e){var e={"aria-busy":p,"aria-checked":a,"aria-describedby":b,"aria-label":m,"aria-rowindex":"menuitemcheckbox"===w||"option"===w||"presentation"===w?void 0:c+f,"aria-posinset":null===h?void 0:h,"aria-selected":"presentation"===w?void 0:r,"aria-setsize":null===v?void 0:v,className:css(o.className,"bolt-table-row bolt-list-row",0===c&&"first-row",n.hasFocus&&"focused",x&&x.selected(c)&&"selected",y&&"single-click-activation",d&&"v-align-middle",u&&"selectable-text"),"data-focuszone":R||x&&!x.selectable(c)?void 0:e.focuszoneId,"data-row-index":o.index,id:getSafeId(g),role:w||"row",tabIndex:getTabIndex(s),onBlur:n.onBlur,onFocus:n.onFocus,onMouseEnter:n.onMouseEnter,onMouseLeave:n.onMouseLeave,ref:i},t=[React.createElement("td",{"aria-hidden":"true",key:"left-spacer",className:"bolt-table-cell-compact bolt-table-cell bolt-list-cell bolt-table-spacer-cell",role:"presentation"},C&&C(c,!0)),o.children,React.createElement("td",{"aria-hidden":"true",key:"right-spacer",className:"bolt-table-cell-compact bolt-table-cell bolt-list-cell bolt-table-spacer-cell",role:"presentation"},C&&C(c,!1))];return React.createElement(FocusZone,{direction:FocusZoneDirection.Horizontal,postprocessKeyStroke:l},d?React.createElement("a",__assign({},getDefaultLinkProps(d),e),t):React.createElement("tr",__assign({},e),t))})}));return s.tooltipProps?React.createElement(Tooltip,__assign({},s.tooltipProps),e):e}function TableLoadingRow(e){return React.createElement(TableRow,{className:"bolt-list-row-loading",details:e.details,index:e.rowIndex},getVisibleColumnsAndIndices(e.columns).map(function(e,t){return SimpleTableCell({columnIndex:t,children:renderLoadingCell(e.column.columnLayout)})}))}function TableCell(e){var t,n=e.ariaLabel,o=e.ariaRowIndex,l=e.className,a=e.colspan,r=e.columnIndex,i=e.role,s=e.tableColumn;return s&&(s.justification===ColumnJustification.Left?t="justify-cell-start":s.justification===ColumnJustification.Right&&(t="justify-cell-end")),React.createElement("td",{"aria-colindex":"presentation"===i?void 0:r+1,"aria-label":"presentation"===i?void 0:n,"aria-readonly":"presentation"===i?void 0:s&&s.readonly,"aria-rowindex":"presentation"===i?void 0:o,className:css(l,s&&s.className,"bolt-table-cell bolt-list-cell",t),colSpan:a,"data-column-index":r,key:"col-"+r,role:i||"gridcell"},e.children)}function SimpleTableCell(e){var t=React.createElement("div",{className:css(e.contentClassName,"bolt-table-cell-content flex-row flex-center")},e.children);return TableCell({ariaLabel:e.ariaLabel,ariaRowIndex:e.ariaRowIndex,children:t,className:e.className,colspan:e.colspan,columnIndex:e.columnIndex,role:e.role,tableColumn:e.tableColumn})}function TwoLineTableCell(e){var t="bolt-table-two-line-cell-item flex-row scroll-hidden",n=React.createElement("div",{className:t},e.line1),t=React.createElement("div",{className:t},e.line2),n=React.createElement(React.Fragment,null,n,t),t=e.iconProps?React.createElement("div",{className:css(e.className,"bolt-table-cell-content flex-row flex-center")},Icon(__assign(__assign({},e.iconProps),{className:css(e.iconProps.className,"bolt-table-two-line-cell-icon flex-noshrink")})),React.createElement("div",{className:"flex-column scroll-hidden"},n)):React.createElement("div",{className:css(e.className,"bolt-table-cell-content flex-column")},n);return TableCell({ariaRowIndex:e.ariaRowIndex,children:t,colspan:e.colspan,columnIndex:e.columnIndex,className:"bolt-table-two-line-cell",tableColumn:e.tableColumn})}function renderEmptyCell(e,t){return React.createElement(TableCell,{columnIndex:t,key:t,role:"presentation"})}function renderSimpleCell(e,t,n,o,l){return renderSimpleCellValue(t,n,o[n.id],l)}function renderSimpleCellValue(e,t,n,o){var l=t.columnStyle,a=!(!n||"string"==typeof n||"number"==typeof n||!n.href);return React.createElement(SimpleTableCell,{ariaRowIndex:o,className:css(l===TableColumnStyle.Primary&&"bolt-table-cell-primary",l===TableColumnStyle.Secondary&&"bolt-table-cell-secondary",l===TableColumnStyle.Tertiary&&"bolt-table-cell-tertiary"),columnIndex:e,contentClassName:a?"bolt-table-cell-content-with-link":void 0,key:e,tableColumn:t},n&&renderListCell(n))}function getVariableLength(){return 80*Math.random()+20+"%"}function renderLoadingCell(e){return e===TableColumnLayout.singleLine||void 0===e?React.createElement("div",{className:"shimmer shimmer-line",style:{width:getVariableLength()}}," "):e===TableColumnLayout.singleLinePrefix?React.createElement(React.Fragment,null,React.createElement("div",{className:"shimmer shimmer-circle-small flex-noshrink"}),React.createElement("div",{className:"shimmer shimmer-line",style:{width:getVariableLength()}}," ")):e===TableColumnLayout.twoLine?React.createElement("div",{className:"flex-column flex-grow"},React.createElement("div",{className:"bolt-table-two-line-cell-item shimmer shimmer-line",style:{width:getVariableLength()}}," "),React.createElement("div",{className:"bolt-table-two-line-cell-item shimmer shimmer-line",style:{width:getVariableLength()}}," ")):e===TableColumnLayout.twoLinePrefix?React.createElement(React.Fragment,null,React.createElement("div",{className:"shimmer shimmer-circle-large flex-noshrink"}),React.createElement("div",{className:"flex-column flex-grow"},React.createElement("div",{className:"bolt-table-two-line-cell-item shimmer shimmer-line",style:{width:getVariableLength()}}," "),React.createElement("div",{className:"bolt-table-two-line-cell-item shimmer shimmer-line",style:{width:getVariableLength()}}," "))):null}export{ColumnFillId,ColumnFill,Table,renderColumns,TableHeaderCell,TableRow,TableLoadingRow,TableCell,SimpleTableCell,TwoLineTableCell,renderEmptyCell,renderSimpleCell,renderSimpleCellValue,renderLoadingCell};